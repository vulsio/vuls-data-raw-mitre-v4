{
	"name": "CVE-2023-52836",
	"seq": "2023-52836",
	"type": "CAN",
	"status": "Candidate",
	"phase": {
		"text": "Assigned",
		"date": "20240521"
	},
	"desc": "In the Linux kernel, the following vulnerability has been resolved: locking/ww_mutex/test: Fix potential workqueue corruption In some cases running with the test-ww_mutex code, I was seeing odd behavior where sometimes it seemed flush_workqueue was returning before all the work threads were finished. Often this would cause strange crashes as the mutexes would be freed while they were being used. Looking at the code, there is a lifetime problem as the controlling thread that spawns the work allocates the \"struct stress\" structures that are passed to the workqueue threads. Then when the workqueue threads are finished, they free the stress struct that was passed to them. Unfortunately the workqueue work_struct node is in the stress struct. Which means the work_struct is freed before the work thread returns and while flush_workqueue is waiting. It seems like a better idea to have the controlling thread both allocate and free the stress structures, so that we can be sure we don't corrupt the workqueue by freeing the structure prematurely. So this patch reworks the test to do so, and with this change I no longer see the early flush_workqueue returns.",
	"refs": [
		{
			"text": "https://git.kernel.org/stable/c/304a2c4aad0fff887ce493e4197bf9cbaf394479",
			"source": "MISC",
			"url": "https://git.kernel.org/stable/c/304a2c4aad0fff887ce493e4197bf9cbaf394479"
		},
		{
			"text": "https://git.kernel.org/stable/c/9ed2d68b3925145f5f51c46559484881d6082f75",
			"source": "MISC",
			"url": "https://git.kernel.org/stable/c/9ed2d68b3925145f5f51c46559484881d6082f75"
		},
		{
			"text": "https://git.kernel.org/stable/c/bccdd808902f8c677317cec47c306e42b93b849e",
			"source": "MISC",
			"url": "https://git.kernel.org/stable/c/bccdd808902f8c677317cec47c306e42b93b849e"
		},
		{
			"text": "https://git.kernel.org/stable/c/c56df79d68677cf062da1b6e3b33e74299a92dfc",
			"source": "MISC",
			"url": "https://git.kernel.org/stable/c/c56df79d68677cf062da1b6e3b33e74299a92dfc"
		},
		{
			"text": "https://git.kernel.org/stable/c/d4d37c9e6a4dbcca958dabd99216550525c7e389",
			"source": "MISC",
			"url": "https://git.kernel.org/stable/c/d4d37c9e6a4dbcca958dabd99216550525c7e389"
		},
		{
			"text": "https://git.kernel.org/stable/c/d8267cabbe1bed15ccf8b0e684c528bf8eeef715",
			"source": "MISC",
			"url": "https://git.kernel.org/stable/c/d8267cabbe1bed15ccf8b0e684c528bf8eeef715"
		},
		{
			"text": "https://git.kernel.org/stable/c/dcd85e3c929368076a7592b27f541e0da8b427f5",
			"source": "MISC",
			"url": "https://git.kernel.org/stable/c/dcd85e3c929368076a7592b27f541e0da8b427f5"
		},
		{
			"text": "https://git.kernel.org/stable/c/e36407713163363e65566e7af0abe207d5f59a0c",
			"source": "MISC",
			"url": "https://git.kernel.org/stable/c/e36407713163363e65566e7af0abe207d5f59a0c"
		},
		{
			"text": "https://git.kernel.org/stable/c/e89d0ed45a419c485bae999426ecf92697cbdda3",
			"source": "MISC",
			"url": "https://git.kernel.org/stable/c/e89d0ed45a419c485bae999426ecf92697cbdda3"
		}
	],
	"votes": {}
}
